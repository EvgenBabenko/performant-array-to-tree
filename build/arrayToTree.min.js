"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var defaultConfig={id:"id",parentId:"parentId",dataField:"data",childrenField:"children",throwIfOrphans:!1};function arrayToTree(e,r){var t,n,a;void 0===r&&(r={});for(var i=__assign(__assign({},defaultConfig),r),o=[],s={},l=r.throwIfOrphans?new Set:null,d=0,p=e;d<p.length;d++){var h=p[d],c=getNestedProperty(h,i.id),u=getNestedProperty(h,i.parentId);Object.prototype.hasOwnProperty.call(s,c)||(s[c]=((t={})[i.childrenField]=[],t)),l&&l.delete(c),i.dataField?s[c][i.dataField]=h:s[c]=__assign(__assign({},h),((n={})[i.childrenField]=s[c][i.childrenField],n));var f=s[c];null==u||""===u?o.push(f):(Object.prototype.hasOwnProperty.call(s,u)||(s[u]=((a={})[i.childrenField]=[],a),l&&l.add(u)),s[u][i.childrenField].push(f))}if(null!==l&&void 0!==l&&l.size)throw new Error("The items array contains orphans that point to the following parentIds: ["+Array.from(l)+"]. These parentIds do not exist in the items array. Hint: prevent orphans to result in an error by passing the following option: { throwIfOrphans: false }");return o}function getNestedProperty(e,r){return r.split(".").reduce(function(e,r){return e[r]},e)}exports.arrayToTree=arrayToTree;