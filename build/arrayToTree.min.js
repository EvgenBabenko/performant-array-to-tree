"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var defaultConfig={id:"id",parentId:"parentId",dataField:"data",childrenField:"children",throwIfOrphans:!1,rootParentIds:{"":!0}};function arrayToTree(r,e){var t,n,a;void 0===e&&(e={});for(var o=__assign(__assign({},defaultConfig),e),i=[],s={},d=e.throwIfOrphans?new Set:null,l=0,h=r;l<h.length;l++){var p=h[l],c=p[o.id],f=p[o.parentId];if(o.rootParentIds[c])throw new Error('The item array contains a node whose parentId both exists in another node and is in `rootParentIds` (`itemId`: "'+c+'", `rootParentIds`: '+Object.keys(o.rootParentIds).map(function(r){return'"'+r+'"'}).join(", ")+").");Object.prototype.hasOwnProperty.call(s,c)||(s[c]=((t={})[o.childrenField]=[],t)),d&&d.delete(c),o.dataField?s[c][o.dataField]=p:s[c]=__assign(__assign({},p),((n={})[o.childrenField]=s[c][o.childrenField],n));var u=s[c];null==f||o.rootParentIds[f]?i.push(u):(Object.prototype.hasOwnProperty.call(s,f)||(s[f]=((a={})[o.childrenField]=[],a),d&&d.add(f)),s[f][o.childrenField].push(u))}if(null!==d&&void 0!==d&&d.size)throw new Error("The items array contains orphans that point to the following parentIds: ["+Array.from(d)+"]. These parentIds do not exist in the items array. Hint: prevent orphans to result in an error by passing the following option: { throwIfOrphans: false }");return i}exports.arrayToTree=arrayToTree;